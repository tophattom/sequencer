<html ng-app="sequencer">
    <head>
        <title>Sequencer</title>
        
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.0/angular.js" charset="utf-8"></script>
        
        <script src="js/audio-cell.js" charset="utf-8"></script>
        
        <script src="js/app.js" charset="utf-8"></script>
        
        <script src="js/services/scale.js" charset="utf-8"></script>
        
        <script src="js/controllers/main.js" charset="utf-8"></script>
        
        <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        
        <link rel="stylesheet" href="css/main.css" media="screen" title="no title" charset="utf-8">
    </head>
    
    <body>
        <div id="main-container" ng-controller="MainCtrl as mainCtrl">
            <div id="matrix-container">
                <table cellspacing="0" id="sequencer-matrix">
                    <tbody>
                        <tr ng-repeat="note in mainCtrl.scale | orderBy:'freq':true">
                            <td ng-repeat="beat in mainCtrl.beats track by $index"
                                ng-click="mainCtrl.toggleAudioCell($index, note)"
                                ng-class="{'bar-even': mainCtrl.Math.floor($index / mainCtrl.beatsPerBar) % 2 === 0}">
                                
                                <div class="cell"
                                    ng-class="{'current-beat': $index === mainCtrl.currentBeat,
                                        'on': mainCtrl.getAudioCell($index, note) !== null}">
                                    <span class="note-name">{{note.name}}</span>
                                </div>
                                
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div id="tools-container">
                <div id="playback-controls" class="control-group">
                    <a href="" ng-click="mainCtrl.start()" ng-class="{'disabled-true': mainCtrl.playing}"><i class="fa fa-play fa-2x"></i></a>
                    <a href="" ng-click="mainCtrl.stop()" ng-class="{'disabled-true': !mainCtrl.playing}"><i class="fa fa-stop fa-2x"></i></a>
                </div> 
                
                <div class="control-group">
                    <form class="control-form" ng-submit="mainCtrl.lengthChanged()">
                        <label for="bpm">
                            BPM:
                            <input type="number" id="bpm" class="short" ng-model="mainCtrl.bpm" ng-change="mainCtrl.bpmChanged()">
                        </label>
                        
                        <label for="bars">
                            BARS:
                            <input type="number" id="bars" class="short" ng-model="mainCtrl.bars">    
                        </label>
                        
                        <label for="beats-per-bar">
                            BEATS / BAR:
                            <input type="number" id="beats-per-bar" class="short" ng-model="mainCtrl.beatsPerBar">
                        </label>      
                        
                        <input type="submit" class="hidden">                  
                    </form>    
                </div>
                
                <div class="control-group">
                    <form class="control-form" ng-submit="mainCtrl.generateNewScale()">
                        <label for="scale-key">
                            SCALE:
                            <select id="scale-key" ng-model="mainCtrl.newScale.key"
                                ng-options="scale.key as scale.name for scale in mainCtrl.availableScales | orderBy:'name'">
                                
                            </select>
                        </label>
                        
                        <label for="scale-start-note-name">
                            KEY:
                            <input type="text" id="scale-start-note-name" class="short" ng-model="mainCtrl.newScale.startNote.name" required>
                        </label>
                        
                        <label for="scale-start-note-octave">
                            OCTAVE:
                            <input type="number" id="scale-start-note-octave" class="short" ng-model="mainCtrl.newScale.startNote.octave" required>
                        </label>
                        
                        <label for="scale-octaves">
                            # OCTAVES:
                            <input type="number" id="scale-octaves" class="short" ng-model="mainCtrl.newScale.octaves">
                        </label>
                        
                        <button type="submit">GENERATE</button>
                    </form>
                </div>
                
                
                <a href="" ng-click="mainCtrl.clear()"><i class="fa fa-times fa-2x"></i></a>
            </div>
        </div>
    </body>
</html>